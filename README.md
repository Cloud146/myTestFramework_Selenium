# Модуль selenium_module

**`selenium_module`** — это исполнительный модуль фреймворка, реализующий абстракции ядра (`core_lib`) с использованием
библиотеки **Selenium WebDriver**.

Этот модуль выступает в роли "плагина", который превращает абстрактные бизнес-команды (например, "кликни по кнопке", "
получи текст") в реальные HTTP-команды протокола WebDriver для управления браузером.
Он загружается динамически через механизм **Java SPI** (Service Provider Interface), что позволяет ядру фреймворка
оставаться независимым от конкретной реализации автоматизации.

---

## Основные задачи модуля

1. **Реализация контракта драйвера (Driver Implementation):**
   Предоставляет класс `SeleniumDriverAdapter`, который имплементирует интерфейс `DriverAdapter` из `core_lib`. Это мост
   между высокоуровневыми шагами тестов и низкоуровневым API Selenium.

2. **Управление жизненным циклом WebDriver:**
   Отвечает за создание, настройку и безопасное закрытие экземпляров `WebDriver`. Использует **Thread-Local Storage**
   для обеспечения изоляции сессий браузера при параллельном запуске тестов.

3. **Конфигурация браузеров (Browser Capabilities):**
   Содержит фабрики (`BrowserDriverFactory`), которые преобразуют универсальный объект `BrowserConfig` (полученный из
   ядра) в специфичные для Selenium объекты опций (`ChromeOptions`, `FirefoxOptions`, `EdgeOptions`) и инициализируют
   драйвер.

4. **Адаптация локаторов:**
   Преобразует платформо-независимые локаторы фреймворка (`locator.Locator`) в нативные объекты
   `org.openqa.selenium.By`.

---

## Архитектура и SPI

Модуль спроектирован так, что он **не вызывается напрямую** из кода тестов.

1. Модуль регистрирует свою фабрику `SeleniumDriverAdapterFactory` в файле
   `META-INF/services/driverAdapter.DriverAdapterFactory`.
2. При старте тестов `TestUtils.AdapterManager` считывает настройку `ui_engine: selenium` из конфига.
3. Через `ServiceLoader` менеджер находит и активирует этот модуль.

---

## Структура пакетов (High-Level)

* **`capabilities`** — Фабрики для создания и настройки экземпляров драйверов (Chrome, Firefox, Edge). Здесь происходит
  работа с `WebDriverManager` и опциями браузеров.
* **`driver`** — Ядро модуля: точка входа (`Factory`), менеджер сессии (`DriverManager`) и основной фасад адаптера (
  `SeleniumDriverAdapter`).
* **`selenium_adapters`** — Атомарные реализации действий: клики (`interaction`), проверки состояния (`element`),
  навигация (`navigation`).
* **`utils`** — Вспомогательные утилиты (конвертация локаторов).