# Пакет selenium_adapters

Пакет **`selenium_adapters`** содержит конкретные реализации атомарных интерфейсов (контрактов) из `core_lib`,
использующие Selenium API.
Именно здесь происходит трансляция команд "фреймворка" в команды "браузера".

Эти классы не используются напрямую в тестах, они агрегируются внутри главного класса `SeleniumDriverAdapter`.

---

## 1. Подпакет `element`

Реализации для работы с элементами (получение свойств, проверка состояния).

### Класс `SeleniumTextAdapter`

Реализует интерфейс `TextAdapter`. Отвечает за извлечение текстового контента.

| Метод                                       | Логика работы                                                                                                                                                                                                                |
|:--------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **`getTextFromElement`**<br>(`String name`) | 1. Получает `PageReader` из контекста.<br>2. Находит локатор элемента по имени.<br>3. Конвертирует в `By` через `LocatorReader`.<br>4. Находит элемент (`driver.findElement`).<br>5. Возвращает видимый текст (`getText()`). |

### Класс `SeleniumElementStateAdapter`

Реализует интерфейс `ElementStateAdapter`. Отвечает за проверки видимости и наличия.
Особенность реализации: методы возвращают `boolean` и подавляют исключения `NoSuchElementException`, так как отсутствие
элемента — это валидное состояние (false), а не ошибка теста.

| Метод                    | Логика работы                                                                                                                                                                                                                                 |
|:-------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **`isElementDisplayed`** | Проверяет видимость.<br>**Алгоритм:**<br>1. Ищет элемент.<br>2. Если найден — возвращает `element.isDisplayed()`.<br>3. Если не найден или "протух" (`Stale`) — возвращает `false`.                                                           |
| **`isElementPresent`**   | Проверяет наличие в DOM.<br>**Алгоритм:**<br>Использует `driver.findElements(by).isEmpty()`. Это самый надежный способ проверить наличие без выбрасывания исключения в Selenium.                                                              |
| **`isElementEnabled`**   | Проверяет интерактивность.<br>**Алгоритм:**<br>1. Ищет элемент.<br>2. Возвращает `element.isEnabled()`.<br>3. **Важно:** Если элемент не найден, выбрасывает `RuntimeException`, так как нельзя проверить свойство у несуществующего объекта. |
| **`toBy`** (`private`)   | Вспомогательный метод. Получает локатор из текущей страницы и конвертирует его в `By` с помощью утилиты `LocatorReader`.                                                                                                                      |

---

## 2. Подпакет `interaction`

Реализации для активных действий пользователя.

### Класс `SeleniumMouseAdapter`

Реализует интерфейс `MouseAdapter`. Отвечает за клики.

| Метод                    | Логика работы                                                                                               |
|:-------------------------|:------------------------------------------------------------------------------------------------------------|
| **`clickElement`**       | Простой клик.<br>Находит элемент и вызывает нативный `element.click()`.                                     |
| **`doubleClickElement`** | Двойной клик.<br>Использует класс `Actions` из Selenium для эмуляции сложного жеста `doubleClick(element)`. |
| **`rightClickElement`**  | Контекстный клик (ПКМ).<br>Использует `Actions` и метод `contextClick(element)`.                            |

---

## 3. Подпакет `navigation`

### Класс `SeleniumNavigationAdapter`

Реализует интерфейс `NavigationAdapter`.

| Метод         | Логика                                                                                                                      |
|:--------------|:----------------------------------------------------------------------------------------------------------------------------|
| **`openURL`** | Открывает страницу по абсолютному адресу через `driver.get(url)`. Selenium автоматически ожидает события `onload` браузера. |